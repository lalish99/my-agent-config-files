---
globs: lib/**/*.ts
---

# Utility Organization Standards

## Centralized Utilities Pattern

Extract reusable logic into dedicated utility files under `lib/utils/`.

## Error Messages

**MANDATORY**: All Spanish error messages in [lib/utils/errorMessages.ts](mdc:lib/utils/errorMessages.ts):

```typescript
export const ERROR_MESSAGES = {
  // Authentication errors
  UNAUTHORIZED: "No autorizado",
  DOCTOR_PROFILE_NOT_FOUND: "Perfil de doctor no encontrado",
  
  // Validation errors
  FULL_NAME_REQUIRED: "El nombre completo es requerido",
  INVALID_EMAIL: "Ingresa un email válido",
  
  // Patient errors
  PATIENT_NOT_FOUND: "Paciente no encontrado",
  PATIENT_ALREADY_EXISTS: "Un paciente con esta información ya existe",
} as const;
```

## Date Utilities

Consistent date formatting in [lib/utils/dateUtils.ts](mdc:lib/utils/dateUtils.ts):

```typescript
export const formatDate = (date: Date | null): string => {
  if (!date) return "—";
  return new Intl.DateTimeFormat('es-ES').format(new Date(date));
};
```

## Validation Utilities

Shared validation logic in [lib/utils/validation.ts](mdc:lib/utils/validation.ts):

```typescript
export const validateEmail = (email: string): boolean => {
  return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
};

export const validateRequired = (value: string): boolean => {
  return value.trim().length > 0;
};
```

## Utility Standards

- **Single Responsibility**: Each utility file has one clear purpose
- **Pure Functions**: No side effects, predictable outputs
- **TypeScript**: Proper typing for all utility functions
- **Constants**: Use `as const` for immutable objects
- **Exports**: Named exports for better tree-shaking

## Preferred Structure

```
lib/utils/
├── errorMessages.ts    # All Spanish error messages
├── dateUtils.ts       # Date formatting utilities
├── validation.ts      # Form validation helpers
└── constants.ts       # Application constants
```

## Anti-Patterns

- ❌ Hardcoded strings in components
- ❌ Inline validation logic
- ❌ Repeated utility functions
- ❌ Mixed language in error messages